(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{153:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return l})),n.d(t,"rightToc",(function(){return c})),n.d(t,"default",(function(){return u}));var r=n(1),a=n(9),o=(n(0),n(159)),i={title:"Configuration"},l={id:"configuration",title:"Configuration",description:"## Environment Variables",source:"@site/docs/configuration.mdx",permalink:"/configuration",editUrl:"https://github.com/civitaslearning/embrace-sql/edit/master/docs/configuration.mdx",sidebar:"someSidebar",previous:{title:"Security",permalink:"/security"},next:{title:"Deploying",permalink:"/deploying"}},c=[{value:"Environment Variables",id:"environment-variables",children:[{value:"EMBRACEQL_ROOT",id:"embraceql_root",children:[]}]},{value:"Example Confguration",id:"example-confguration",children:[]},{value:"File Tree",id:"file-tree",children:[]}],s={rightToc:c};function u(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(o.b)("wrapper",Object(r.a)({},s,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("h2",{id:"environment-variables"},"Environment Variables"),Object(o.b)("p",null,"You can have any environment variables you like to be interpolated in your ",Object(o.b)("inlineCode",{parentName:"p"},"embracesql.yaml")," config."),Object(o.b)("h3",{id:"embraceql_root"},"EMBRACEQL_ROOT"),Object(o.b)("p",null,"By default, this is the current working directory, but you can set any directory you like to be the root.\nEmbraceSQL will look in this directory for its configuration and write generated files here."),Object(o.b)("h2",{id:"example-confguration"},"Example Confguration"),Object(o.b)("p",null,"Best way to understand the configuration is with a full sample."),Object(o.b)("p",null,"Databases are 'named', names such as ",Object(o.b)("inlineCode",{parentName:"p"},"default"),", ",Object(o.b)("inlineCode",{parentName:"p"},"other"),", and these names are used\nin the generation of clients and typed context."),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-yaml",metastring:'title="./embracesql.yml"',title:'"./embracesql.yml"'}),"databases:\n  default: sqlite:embracesql.db\n  other: sqlite:other.db\n  postgres: postgresql://${USER}:${PASSWORD}@${HOST}:${PORT}/${DB}\ntwinCommandsTo: kafka:hostname:port/topic\n")),Object(o.b)("h2",{id:"file-tree"},"File Tree"),Object(o.b)("p",null,"You run EmbraceSQL in any folder you like -- this is the root.\nA root folder should look like:"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-bash",metastring:'title="/"',title:'"/"'}),"after.js\nafterBatch.js\nafterError.js\nafterMigration.js\nbefore.js\nbeforeBatch.js\nbeforeMigration.js\nbeforeStreamMessage.js\nembracesql.yml\ndefault/\n    things/\n        all.sql\n        all.sql.before.js\n        all.sql.beforeBatch.js\n        all.sql.after.js\n        all.sql.afterBatch.js\n        all.sql.afterError.js\n        add.sql\n        add.sql.before.js\n        add.sql.beforeBatch.js\n        add.sql.after.js\n        add.sql.afterBatch.js\n        add.sql.afterError.js\nmigrations/\n    000.sql\n    001.sql\nresolveSQL.js\nvalidateToken.js\n")),Object(o.b)("p",null,"You can make any folders you like to organize your SQL, starting with a folder per database, and then organizing as you see fit.\nIn this example, ",Object(o.b)("inlineCode",{parentName:"p"},"default"),"\nThe path on disk becomes the relative path to invoke via REST with ",Object(o.b)("inlineCode",{parentName:"p"},"/"),", and via SDK client libraries via '.'.\nWithin each database folder, organize by use case or topic area of your application."))}u.isMDXComponent=!0},159:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return f}));var r=n(0),a=n.n(r);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=a.a.createContext({}),u=function(e){var t=a.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l({},t,{},e)),n},b=function(e){var t=u(e.components);return a.a.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},d=Object(r.forwardRef)((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,i=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),b=u(n),d=r,f=b["".concat(i,".").concat(d)]||b[d]||p[d]||o;return n?a.a.createElement(f,l({ref:t},s,{components:n})):a.a.createElement(f,l({ref:t},s))}));function f(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=d;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var s=2;s<o;s++)i[s]=n[s];return a.a.createElement.apply(null,i)}return a.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);